CREATE DATABASE AGENCY;
\l
\c AGENCY;

CREATE TABLE ENDERECO(
    IDENTIFICADOR NUMERIC(10) NOT NULL,
    CEP NUMERIC(8) NOT NULL,
    RUA VARCHAR(60) NOT NULL,
    NUMERO NUMERIC(4) NOT NULL,
    BAIRRO VARCHAR(50) NOT NULL,
    IBGE_CIDADE NUMERIC(10) NOT NULL                //CHAVE ESTRANGEIRA
);
ALTER TABLE ENDERECO ADD CONSTRAINT ENDERECO_PK PRIMARY KEY (IDENTIFICADOR);
ALTER TABLE ENDERECO ADD CONSTRAINT ENDERECO_FK_CIDADE FOREIGN KEY (IBGE_CIDADE) REFERENCES CIDADE (IBGE);

CREATE TABLE HOTEL(
    CNPJ NUMERIC(14) NOT NULL,
    NOME VARCHAR(50) NOT NULL,
    CATEGORIA VARCHAR(5) NOT NULL,
    IDENTIFICADOR_ENDERECO NUMERIC(10) NOT NULL     //CHAVE ESTRANGEIRA
);
ALTER TABLE HOTEL ADD CONSTRAINT HOTEL_PK PRIMARY KEY (CNPJ);
ALTER TABLE HOTEL ADD CONSTRAINT HOTEL_FK_ENDERECO FOREIGN KEY (IDENTIFICADOR_ENDERECO) REFERENCES ENDERECO (IDENTIFICADOR);

CREATE TABLE APARTAMENTO(
    NUMERO NUMERIC(4) NOT NULL,
    CNPJ_HOTEL NUMERIC(14) NOT NULL,                //CHAVE ESTRANGEIRA
    NOME_TIPO VARCHAR(50) NOT NULL                  //CHAVE ESTRANGEIRA
);
ALTER TABLE APARTAMENTO ADD CONSTRAINT APARTAMENTO_PK PRIMARY KEY (NUMERO);
ALTER TABLE APARTAMENTO ADD CONSTRAINT APARTAMENTO_FK_HOTEL FOREIGN KEY (CNPJ_HOTEL) REFERENCES HOTEL (CNPJ);
ALTER TABLE APARTAMENTO ADD CONSTRAINT APARTAMENTO_FK_TIPO FOREIGN KEY (NOME_TIPO) REFERENCES TIPO_APARTAMENTO (NOME);

CREATE TABLE TIPO_APARTAMENTO(
    NOME VARCHAR(50) NOT NULL,
    VALOR DECIMAL(10,2) NOT NULL
);
ALTER TABLE TIPO_APARTAMENTO ADD CONSTRAINT TIPO_APARTAMENTO_PK PRIMARY KEY (NOME);

CREATE TABLE RESTAURANTE(
    CNPJ NUMERIC(14) NOT NULL,
    NOME VARCHAR(50) NOT NULL,
    CATEGORIA VARCHAR(10) NOT NULL,
    IDENTIFICADOR_ENDERECO NUMERIC(10) NOT NULL     //CHAVE ESTRANGEIRA
);
ALTER TABLE RESTAURANTE ADD CONSTRAINT RESTAURANTE_PK PRIMARY KEY (CNPJ);
ALTER TABLE RESTAURANTE ADD CONSTRAINT RESTAURANTE_FK_ENDERECO FOREIGN KEY (IDENTIFICADOR_ENDERECO) REFERENCES ENDERECO (IDENTIFICADOR);

CREATE TABLE CIDADE(
    IBGE NUMERIC(10) NOT NULL,
    NOME VARCHAR(50) NOT NULL,
    ESTADO VARCHAR(50) NOT NULL
);
ALTER TABLE CIDADE ADD CONSTRAINT CIDADE_PK PRIMARY KEY (IBGE);

CREATE TABLE PONTO_TURISTICO(
    LATITUDE NUMERIC(9,6) NOT NULL,
    LONGITUDE NUMERIC(9,6) NOT NULL,            //verificar como colocar essa chave
    DESCRICAO VARCHAR(200) NOT NULL,
    IBGE_CIDADE NUMERIC(10) NOT NULL            //CHAVE ESTRANGEIRA
);
ALTER TABLE PONTO_TURISTICO ADD CONSTRAINT PONTO_TURISTICO_PK PRIMARY KEY (LATITUDE, LONGITUDE);
ALTER TABLE PONTO_TURISTICO ADD CONSTRAINT PONTO_TURISTICO_FK_CIDADE FOREIGN KEY (IBGE_CIDADE) REFERENCES CIDADE (IBGE);