//C:\Program Files\PostgreSQL\15\bin
CREATE DATABASE SCHOOL;
\l
\c SCHOOL;
CREATE TABLE CURSO(
    CODIGO VARCHAR(5) NOT NULL,                         //CHAVE PRIMARIA
    NOME VARCHAR(50) NOT NULL,
    TIPO VARCHAR(10) NOT NULL,
    PRECO DECIMAL(6,2) NOT NULL,
    DURACAO INTEGER NOT NULL,
    CONSTRAINT CURSO_PK PRIMARY KEY (CODIGO)
);

CREATE TABLE PROFESSOR(
    REGISTRO NUMERIC(10) NOT NULL,                      //CHAVE PRIMARIA
    NOME VARCHAR(50) NOT NULL,
    TELEFONE NUMERIC(13) NOT NULL,
    CONSTRAINT PROFESSOR_PK PRIMARY KEY (REGISTRO)
);


CREATE TABLE ALUNO(
    EMAIL VARCHAR(60) NOT NULL,                         //CHAVE PRIMARIA
    NOME VARCHAR(50) NOT NULL,
    TELEFONE NUMERIC(13) NOT NULL,
    ENDERECO VARCHAR(100) NOT NULL,
    CONSTRAINT ALUNO_PK PRIMARY KEY (EMAIL)
);


CREATE TABLE LESIONA(
    REGISTRO_PROFESSOR NUMERIC(10) NOT NULL,                //CHAVE PFK
    CODIGO_CURSO VARCHAR(5) NOT NULL,                       //CHAVE PFK
    CONSTRAINT LESIONA_PK PRIMARY KEY (REGISTRO_PROFESSOR, CODIGO_CURSO)
);

CREATE TABLE CURSA(
    EMAIL_ALUNO VARCHAR(60) NOT NULL,                       //CHAVE PFK
    CODIGO_CURSO VARCHAR(5) NOT NULL,                       //CHAVE PFK
    DATA_INICIO DATE NOT NULL,
    CONSTRAINT CURSA_PK PRIMARY KEY (EMAIL_ALUNO, CODIGO_CURSO)
);

ALTER TABLE LESIONA ADD CONSTRAINT LESIONA_FK_PROFESSOR FOREIGN KEY (REGISTRO_PROFESSOR) REFERENCES PROFESSOR (REGISTRO);
ALTER TABLE LESIONA ADD CONSTRAINT LESIONA_FK_CURSO FOREIGN KEY (CODIGO_CURSO) REFERENCES CURSO (CODIGO);
ALTER TABLE CURSA ADD CONSTRAINT CURSA_FK_ALUNO FOREIGN KEY (EMAIL_ALUNO) REFERENCES ALUNO (EMAIL);
ALTER TABLE CURSA ADD CONSTRAINT CURSA_FK_CURSO FOREIGN KEY (CODIGO_CURSO) REFERENCES CURSO (CODIGO);


INSERT INTO CURSO(CODIGO, NOME, TIPO, PRECO, DURACAO)
VALUES ('1234', 'Matematica', 'Presencial', '1200,00', '5')

INSERT INTO PROFESSOR(REGISTRO, NOME, TELEFONE)
VALUES ('12345', 'Aaaaaaaa Aaaaaaa Aa Aaaaa', '11111111111')

INSERT INTO ALUNO(EMAIL, NOME, TELEFONE, ENDERECO)
VALUES ('Rrrrrrr-rr@rrrrrrr.rrr', 'Aaaaaaaa Aaaaaaa Aa Aaaaa', '11111111111', 'Rua 18')

INSERT INTO LESIONA(REGISTRO_PROFESSOR, CODIGO_CURSO)
VALUES ('12345', '1234')

INSERT INTO CURSA(EMAIL_ALUNO, CODIGO_CURSO, DATA_INICIO)
VALUES ('Rrrrrrr-rr@rrrrrrr.rrr', '1234', '30/05/2023')

