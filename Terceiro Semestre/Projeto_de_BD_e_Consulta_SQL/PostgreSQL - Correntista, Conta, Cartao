//C:\Program Files\PostgreSQL\15\bin
CREATE DATABASE BANK;
\l
\c BANK;

CREATE TABLE CARTAO(
    NUMERO NUMERIC(20) NOT NULL,
    SENHA NUMERIC(6) NOT NULL,
    EMISSAO DATE NOT NULL,
    LIMITE FLOAT NOT NULL,
    VALIDADE DATE NOT NULL,
    CPF_CORRENTISTA VARCHAR(11) NOT NULL,           //CHAVE ESTRANGEIRA
    NUMERO_CONTA INTEGER NOT NULL                   //CHAVE ESTRANGEIRA
);
ALTER TABLE CARTAO ADD CONSTRAINT CARTAO_PK PRIMARY KEY (NUMERO);
ALTER TABLE CARTAO ADD CONSTRAINT CARTAO_FK_CORRENTISTA FOREIGN KEY (CPF_CORRENTISTA) REFERENCES CORRENTISTA (CPF);
ALTER TABLE CARTAO ADD CONSTRAINT CARTAO_FK_CONTA FOREIGN KEY (NUMERO_CONTA) REFERENCES CONTA (NUMERO);

CREATE TABLE CONTA(
    NUMERO INTEGER NOT NULL,
    SALDO NUMERIC(15,2) NOT NULL,
    CPF_CORRENTISTA VARCHAR(11) NOT NULL,           //CHAVE ESTRANGEIRA
    LIMITE FLOAT NOT NULL
);
ALTER TABLE CONTA ADD CONSTRAINT CONTA_PK PRIMARY KEY (NUMERO);
ALTER TABLE CONTA ADD CONSTRAINT CONTA_FK_CORRENTISTA FOREIGN KEY (CPF_CORRENTISTA) REFERENCES CORRENTISTA (CPF);

CREATE TABLE CORRENTISTA(
    CPF VARCHAR(11) NOT NULL,
    NOME VARCHAR(50) NOT NULL,
    EMAIL VARCHAR(100) NOT NULL,
    TELEFONE VARCHAR(13) NOT NULL,
    ENDERECO VARCHAR(200) NOT NULL
);
ALTER TABLE CORRENTISTA ADD CONSTRAINT CORRENTISTA_PK PRIMARY KEY (CPF);

INSERT INTO CORRENTISTA (CPF, NOME, EMAIL,TELEFONE, ENDERECO) 
VALUES ('12345142650','Anderson Richard da Silva','richard-r3@hotmail.com','35991629116','Rua 18');
INSERT INTO CORRENTISTA (CPF, NOME, EMAIL,TELEFONE, ENDERECO) 
VALUES ('12345142620','Alysson José França','Nãoseimeuemail@hotmail.com','35123456123','Rua do aterrado');
INSERT INTO CORRENTISTA (CPF, NOME, EMAIL,TELEFONE, ENDERECO) 
VALUES ('03128139610','Claudilene Junco Hayasaka','ClaudileneJunco@gmail.com','35999525867','Rua Vasconcello Bernardes Batista');

INSERT INTO CONTA (NUMERO, SALDO, CPF_CORRENTISTA,LIMITE) 
VALUES ('111456','8.50','12345142650','100');

SELECT * FROM CONTA;
DELETE FROM CORRENTISTA WHERE CPF = '12345142650';
//RESTRIÇÕES
//TESTE COM NULL
INSERT INTO CORRENTISTA (CPF, NOME, EMAIL,TELEFONE, ENDERECO) 
VALUES ('12345678910','Silvio Cezar','Silviocezar@hotmail.com','35998751442',NULL);
INSERT INTO CORRENTISTA (CPF, NOME, EMAIL,TELEFONE, ENDERECO) 
VALUES ('12345142650','Anderson Richard da Silva','richard-r3@hotmail.com','35991629116','Rua 18');
//TESTE DA RESTRIÇÕES FK    
INSERT INTO CONTA (NUMERO, SALDO, CPF_CORRENTISTA,LIMITE) 
VALUES ('578','8.50','89621','100');