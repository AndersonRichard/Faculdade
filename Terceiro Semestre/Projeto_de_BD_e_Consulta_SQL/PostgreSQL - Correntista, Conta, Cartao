//C:\Program Files\PostgreSQL\15\bin
CREATE DATABASE BANK;
\l
\c BANK;

CREATE TABLE CARTAO(
    NUMERO NUMERIC(20) NOT NULL,
    SENHA NUMERIC(6) NOT NULL,
    EMISSAO DATE NOT NULL,
    LIMITE FLOAT NOT NULL,
    VALIDADE DATE NOT NULL,
    CPF_CORRENTISTA VARCHAR(11) NOT NULL,           //CHAVE ESTRANGEIRA
    NUMERO_CONTA INTEGER NOT NULL                   //CHAVE ESTRANGEIRA
);
ALTER TABLE CARTAO ADD CONSTRAINT CARTAO_PK PRIMARY KEY (NUMERO);
ALTER TABLE CARTAO ADD CONSTRAINT CARTAO_FK_CORRENTISTA FOREIGN KEY (CPF_CORRENTISTA) REFERENCES CORRENTISTA (CPF);
ALTER TABLE CARTAO ADD CONSTRAINT CARTAO_FK_CONTA FOREIGN KEY (NUMERO_CONTA) REFERENCES CONTA (NUMERO);

CREATE TABLE CONTA(
    NUMERO INTEGER NOT NULL,
    SALDO NUMERIC(15,2) NOT NULL,
    CPF_CORRENTISTA VARCHAR(11) NOT NULL,           //CHAVE ESTRANGEIRA
    LIMITE FLOAT NOT NULL
);
ALTER TABLE CONTA ADD CONSTRAINT CONTA_PK PRIMARY KEY (NUMERO);
ALTER TABLE CONTA ADD CONSTRAINT CONTA_FK_CORRENTISTA FOREIGN KEY (CPF_CORRENTISTA) REFERENCES CORRENTISTA (CPF);

CREATE TABLE CORRENTISTA(
    CPF VARCHAR(11) NOT NULL,
    NOME VARCHAR(50) NOT NULL,
    EMAIL VARCHAR(100) NOT NULL,
    TELEFONE VARCHAR(13) NOT NULL
);
ALTER TABLE CORRENTISTA ADD CONSTRAINT CORRENTISTA_PK PRIMARY KEY (CPF);